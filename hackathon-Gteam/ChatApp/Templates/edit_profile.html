{% extends 'base.html' %}
 {% block title %}edit_profile{% endblock %} 
{% block page_css%}
<link rel="stylesheet" href="{{ url_for('static', filename='css/edit_profile.css') }}" />
{% endblock %} {% block content %} <div class="wrapper">
  <nav class="menu-container" id="menu-container">
    <div class="menu-header">
        <h3>偏愛会議</h3>
    </div>
    <nav class="menu-buttons">
        <a class="menu-button" href="{{ url_for('room_create_view') }}"><i class="fas fa-plus"></i> ルーム作成</a>
        <a class="menu-button" href="{{ url_for('room_search_view') }}"><i class="fas fa-search"></i> ジャンル検索</a>
        <a class="menu-button" href="{{ url_for('profile_view', user_id=current_user.user_id) }}"><i class="fas fa-user"></i> プロフィール</a>
        <a
        class="menu-button"
        href="{{ url_for('survey_view') }}"
        ><i class="fas fa-user"></i> 趣味を探す</a
      >
      <a
        class="menu-button"
        href="{{ url_for('questionnaire_view') }}"
        ><i class="fas fa-user"></i> アンケートにご協力ください</a
      >
    </nav>
    <div class="menu-footer">
        <a class="logout-button" href="{{ url_for('logout') }}"><i class="fas fa-sign-out-alt"></i> ログアウト</a>
    </div>
  </nav>
  
  <div class="room-container">
    <div class="menu-btn" id="menu-btn">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <div class="room-header">
       {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="flashes">
          {% for message in messages %}
            <p>{{ message }}</p>
          {% endfor %}
        </div>
        {% endif %}
      {% endwith %}
      <h5>プロフィール編集</h5>
    </div>
    <div class="room-main">
      <h1 class="min-with-title">偏愛会議</h1>
      <h2 class="min-with-subtitle">プロフィール</h2>
      <form method="POST" action="{{ url_for('edit_profile') }}">
        <!-- 編集用の入力フォーム -->
        
            
          
        <div class="form-group">
        {% if profile["nickname"] is not none %}
          <label for="nickname">ニックネーム</label>
          <input placeholder="必須項目です" type="text" id="nickname" name="nickname" value="{{ profile['nickname'] }}" required/>
        {% else %}
          <input placeholder="必須項目です" type="text" id="nickname" name="nickname" value="nickname" required/>
        {% endif %}
      </div>
        <div class="form-group">
          <label for="bio">コメント</label>
          <textarea id="bio" name="bio" rows="3">{{ current_user.bio or '' }}</textarea>
        </div>
        <div class="form-group">
          <label for="favorite">趣味</label>
          <textarea id="favorite" name="favorite" rows="2" placeholder="例：食べ歩き">{{ current_user.favorite or '' }}</textarea>
        </div>
        <div class="form-group">
        {% if profile["occupation"] is not none %}
          <label for="occupation">職業</label>
          <input placeholder="必須項目です" type="text" id="nickname" name="occupation" value="{{ profile['occupation'] }}" required/>
        {% else %}
          <input type=text id="occupation" name="occupation">
        {% endif %}
        </div>
        <div class="form-group">
        {% if profile["residence"] is not none %}
           <label for="residence">所在地</label>
          <input placeholder="必須項目です" type="text" id="nickname" name="occupation" value="{{ profile['residence'] }}" required/>
        {% else %}
          <input type=text id="residence" name="residence">     
         {% endif %}
        </div>
        <label class="icon-container">アイコン選択</label>
        {% set icons = ['icon.jpg', 'balance_scale.png', 'basketball.png', 'bird.png', 'camera.png', 'candy.png', 'cherry_blossom.png', 'clover.png', 'gift.png', 'glasses.png', 'maple_leaf.png', 'music.png', 'notebook.png', 'sunflower.png', 'teddy_bear.png', 'whale.png'] %}
        <div class="icon-grid">
          {% for icon in icons %}
          
            <label class="icon-option">
              <input type="radio" name="icon" value="{{ icon }}" 
              {% if (current_user.icon_image_url is not defined and icon == 'icon.jpg') or current_user.icon_image_url == icon %}
              checked
              {% endif %}
              >
              <img class="profile-icon" width="100" height="100" src="{{ url_for('static', filename='image/' ~ icon) }}" alt="プロフィール画像">              
            </label>
            </label> 
          {% endfor %}
        </div>
        <br>
        <div class="public">
          <div class="public-block">
              <input
                type="radio"
                name="public"
                id="public"
                value="1"
              />
              <label for="public">公開</label>
          </div>
          <div class="public-block">
              <input
                type="radio"
                name="public"
                id="not_public"
                value="0"
                checked
              />
              <label for="not_public">非公開</label>
          </div>
        </div>
        <div class="button-container">
          <button class="update-button" type="submit">登録</button>
        </div>
      </form>
      <div class="button-container">
        <form method="POST" action="{{ url_for('delete_account_process') }}">
          <button class="delete-button" type="submit">アカウント削除</button>
        </form>
      </div>
    </div>
  </div>
  </div>

{% endblock %}
